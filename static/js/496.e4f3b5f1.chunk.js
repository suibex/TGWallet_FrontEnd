"use strict";(self.webpackChunkclient=self.webpackChunkclient||[]).push([[496],{49496:(__unused_webpack___webpack_module__,__webpack_exports__,__webpack_require__)=>{eval("// ESM COMPAT FLAG\n__webpack_require__.r(__webpack_exports__);\n\n// EXPORTS\n__webpack_require__.d(__webpack_exports__, {\n  W3mModal: () => (/* reexport */ W3mModal)\n});\n\n// EXTERNAL MODULE: ./node_modules/@reown/appkit-core/dist/esm/exports/index.js + 9 modules\nvar esm_exports = __webpack_require__(31103);\n// EXTERNAL MODULE: ./node_modules/@reown/appkit-ui/dist/esm/index.js + 276 modules\nvar esm = __webpack_require__(42100);\n// EXTERNAL MODULE: ./node_modules/@reown/appkit-scaffold-ui/node_modules/lit/index.js + 1 modules\nvar lit = __webpack_require__(47196);\n// EXTERNAL MODULE: ./node_modules/@reown/appkit-scaffold-ui/node_modules/lit/decorators.js\nvar decorators = __webpack_require__(80475);\n;// ./node_modules/@reown/appkit-scaffold-ui/dist/esm/src/modal/w3m-modal/styles.js\n\n/* harmony default export */ const styles = ((0,lit/* css */.AH)`\n  :host {\n    z-index: var(--w3m-z-index);\n    display: block;\n    backface-visibility: hidden;\n    will-change: opacity;\n    position: fixed;\n    top: 0;\n    left: 0;\n    right: 0;\n    bottom: 0;\n    pointer-events: none;\n    opacity: 0;\n    background-color: var(--wui-cover);\n    transition: opacity 0.2s var(--wui-ease-out-power-2);\n    will-change: opacity;\n  }\n\n  :host(.open) {\n    opacity: 1;\n  }\n\n  wui-card {\n    max-width: var(--w3m-modal-width);\n    width: 100%;\n    position: relative;\n    animation: zoom-in 0.2s var(--wui-ease-out-power-2);\n    animation-fill-mode: backwards;\n    outline: none;\n  }\n\n  wui-card[shake='true'] {\n    animation:\n      zoom-in 0.2s var(--wui-ease-out-power-2),\n      w3m-shake 0.5s var(--wui-ease-out-power-2);\n  }\n\n  wui-flex {\n    overflow-x: hidden;\n    overflow-y: auto;\n    display: flex;\n    align-items: center;\n    justify-content: center;\n    width: 100%;\n    height: 100%;\n  }\n\n  @media (max-height: 700px) and (min-width: 431px) {\n    wui-flex {\n      align-items: flex-start;\n    }\n\n    wui-card {\n      margin: var(--wui-spacing-xxl) 0px;\n    }\n  }\n\n  @media (max-width: 430px) {\n    wui-flex {\n      align-items: flex-end;\n    }\n\n    wui-card {\n      max-width: 100%;\n      border-bottom-left-radius: 0;\n      border-bottom-right-radius: 0;\n      border-bottom: none;\n      animation: slide-in 0.2s var(--wui-ease-out-power-2);\n    }\n\n    wui-card[shake='true'] {\n      animation:\n        slide-in 0.2s var(--wui-ease-out-power-2),\n        w3m-shake 0.5s var(--wui-ease-out-power-2);\n    }\n  }\n\n  @keyframes zoom-in {\n    0% {\n      transform: scale(0.95) translateY(0);\n    }\n    100% {\n      transform: scale(1) translateY(0);\n    }\n  }\n\n  @keyframes slide-in {\n    0% {\n      transform: scale(1) translateY(50px);\n    }\n    100% {\n      transform: scale(1) translateY(0);\n    }\n  }\n\n  @keyframes w3m-shake {\n    0% {\n      transform: scale(1) rotate(0deg);\n    }\n    20% {\n      transform: scale(1) rotate(-1deg);\n    }\n    40% {\n      transform: scale(1) rotate(1.5deg);\n    }\n    60% {\n      transform: scale(1) rotate(-1.5deg);\n    }\n    80% {\n      transform: scale(1) rotate(1deg);\n    }\n    100% {\n      transform: scale(1) rotate(0deg);\n    }\n  }\n\n  @keyframes w3m-view-height {\n    from {\n      height: var(--prev-height);\n    }\n    to {\n      height: var(--new-height);\n    }\n  }\n`);\n// EXTERNAL MODULE: ./node_modules/@reown/appkit-common/dist/esm/index.js + 14 modules\nvar dist_esm = __webpack_require__(24815);\n;// ./node_modules/@reown/appkit-scaffold-ui/dist/esm/src/modal/w3m-modal/index.js\nvar __decorate = undefined && undefined.__decorate || function (decorators, target, key, desc) {\n  var c = arguments.length,\n    r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc,\n    d;\n  if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n  return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\n\n\n\n\n\n\nconst SCROLL_LOCK = 'scroll-lock';\nlet W3mModal = class W3mModal extends lit/* LitElement */.WF {\n  constructor() {\n    super();\n    this.unsubscribe = [];\n    this.abortController = undefined;\n    this.open = esm_exports/* ModalController */.W3.state.open;\n    this.caipAddress = esm_exports/* ChainController */.WB.state.activeCaipAddress;\n    this.caipNetwork = esm_exports/* ChainController */.WB.state.activeCaipNetwork;\n    this.isSiweEnabled = esm_exports/* OptionsController */.Hd.state.isSiweEnabled;\n    this.shake = esm_exports/* ModalController */.W3.state.shake;\n    this.initializeTheming();\n    esm_exports/* ApiController */.Np.prefetch();\n    this.unsubscribe.push(...[esm_exports/* ModalController */.W3.subscribeKey('open', val => val ? this.onOpen() : this.onClose()), esm_exports/* ModalController */.W3.subscribeKey('shake', val => this.shake = val), esm_exports/* AccountController */.Uj.subscribeKey('siweStatus', val => this.onSiweStatusChange(val), 'eip155'), esm_exports/* ChainController */.WB.subscribeKey('activeCaipNetwork', val => this.onNewNetwork(val)), esm_exports/* ChainController */.WB.subscribeKey('activeCaipAddress', val => this.onNewAddress(val)), esm_exports/* OptionsController */.Hd.subscribeKey('isSiweEnabled', val => this.isSiweEnabled = val)]);\n    esm_exports/* EventsController */.En.sendEvent({\n      type: 'track',\n      event: 'MODAL_LOADED'\n    });\n  }\n  disconnectedCallback() {\n    this.unsubscribe.forEach(unsubscribe => unsubscribe());\n    this.onRemoveKeyboardListener();\n  }\n  render() {\n    return this.open ? (0,lit/* html */.qy)`\n          <wui-flex @click=${this.onOverlayClick.bind(this)} data-testid=\"w3m-modal-overlay\">\n            <wui-card\n              shake=\"${this.shake}\"\n              role=\"alertdialog\"\n              aria-modal=\"true\"\n              tabindex=\"0\"\n              data-testid=\"w3m-modal-card\"\n            >\n              <w3m-header></w3m-header>\n              <w3m-router></w3m-router>\n              <w3m-snackbar></w3m-snackbar>\n              <w3m-alertbar></w3m-alertbar>\n            </wui-card>\n          </wui-flex>\n          <w3m-tooltip></w3m-tooltip>\n        ` : null;\n  }\n  async onOverlayClick(event) {\n    if (event.target === event.currentTarget) {\n      await this.handleClose();\n    }\n  }\n  async handleClose() {\n    const isSiweSignScreen = esm_exports/* RouterController */.IN.state.view === 'ConnectingSiwe';\n    const isApproveSignScreen = esm_exports/* RouterController */.IN.state.view === 'ApproveTransaction';\n    if (this.isSiweEnabled) {\n      const {\n        SIWEController\n      } = await __webpack_require__.e(/* import() */ 155).then(__webpack_require__.bind(__webpack_require__, 46155));\n      const isUnauthenticated = SIWEController.state.status !== 'success';\n      if (isUnauthenticated && (isSiweSignScreen || isApproveSignScreen)) {\n        esm_exports/* ModalController */.W3.shake();\n      } else {\n        esm_exports/* ModalController */.W3.close();\n      }\n    } else {\n      esm_exports/* ModalController */.W3.close();\n    }\n  }\n  initializeTheming() {\n    const {\n      themeVariables,\n      themeMode\n    } = esm_exports/* ThemeController */.Wn.state;\n    const defaultThemeMode = esm.UiHelperUtil.getColorTheme(themeMode);\n    (0,esm.initializeTheming)(themeVariables, defaultThemeMode);\n  }\n  onClose() {\n    this.open = false;\n    this.classList.remove('open');\n    this.onScrollUnlock();\n    esm_exports/* SnackController */.Pt.hide();\n    this.onRemoveKeyboardListener();\n  }\n  onOpen() {\n    this.open = true;\n    this.classList.add('open');\n    this.onScrollLock();\n    this.onAddKeyboardListener();\n  }\n  onScrollLock() {\n    const styleTag = document.createElement('style');\n    styleTag.dataset['w3m'] = SCROLL_LOCK;\n    styleTag.textContent = `\n      body {\n        touch-action: none;\n        overflow: hidden;\n        overscroll-behavior: contain;\n      }\n      w3m-modal {\n        pointer-events: auto;\n      }\n    `;\n    document.head.appendChild(styleTag);\n  }\n  onScrollUnlock() {\n    const styleTag = document.head.querySelector(`style[data-w3m=\"${SCROLL_LOCK}\"]`);\n    if (styleTag) {\n      styleTag.remove();\n    }\n  }\n  onAddKeyboardListener() {\n    this.abortController = new AbortController();\n    const card = this.shadowRoot?.querySelector('wui-card');\n    card?.focus();\n    window.addEventListener('keydown', event => {\n      if (event.key === 'Escape') {\n        this.handleClose();\n      } else if (event.key === 'Tab') {\n        const {\n          tagName\n        } = event.target;\n        if (tagName && !tagName.includes('W3M-') && !tagName.includes('WUI-')) {\n          card?.focus();\n        }\n      }\n    }, this.abortController);\n  }\n  onRemoveKeyboardListener() {\n    this.abortController?.abort();\n    this.abortController = undefined;\n  }\n  onSiweStatusChange(nextStatus) {\n    if (nextStatus === 'success') {\n      esm_exports/* ModalController */.W3.close();\n    }\n  }\n  async onNewAddress(caipAddress) {\n    const prevCaipAddress = this.caipAddress;\n    const prevConnected = prevCaipAddress ? esm_exports/* CoreHelperUtil */.wE.getPlainAddress(prevCaipAddress) : undefined;\n    const nextConnected = caipAddress ? esm_exports/* CoreHelperUtil */.wE.getPlainAddress(caipAddress) : undefined;\n    const isSameAddress = prevConnected === nextConnected;\n    this.caipAddress = caipAddress;\n    if (nextConnected && !isSameAddress && this.isSiweEnabled) {\n      try {\n        const {\n          SIWEController\n        } = await __webpack_require__.e(/* import() */ 155).then(__webpack_require__.bind(__webpack_require__, 46155));\n        const signed = esm_exports/* AccountController */.Uj.state.siweStatus === 'success';\n        if (!prevConnected && nextConnected) {\n          this.onSiweNavigation();\n        } else if (signed && prevConnected && nextConnected && prevConnected !== nextConnected) {\n          if (SIWEController.state._client?.options.signOutOnAccountChange) {\n            await SIWEController.signOut();\n            this.onSiweNavigation();\n          }\n        }\n      } catch (err) {\n        this.caipAddress = prevCaipAddress;\n        throw err;\n      }\n    }\n    if (!nextConnected) {\n      esm_exports/* ModalController */.W3.close();\n    }\n  }\n  async onNewNetwork(nextCaipNetwork) {\n    if (!this.caipAddress) {\n      this.caipNetwork = nextCaipNetwork;\n      esm_exports/* RouterController */.IN.goBack();\n      return;\n    }\n    const prevCaipNetworkId = this.caipNetwork?.caipNetworkId?.toString();\n    const nextNetworkId = nextCaipNetwork?.caipNetworkId?.toString();\n    if (prevCaipNetworkId && nextNetworkId && prevCaipNetworkId !== nextNetworkId) {\n      if (this.isSiweEnabled) {\n        const {\n          SIWEController\n        } = await __webpack_require__.e(/* import() */ 155).then(__webpack_require__.bind(__webpack_require__, 46155));\n        if (SIWEController.state._client?.options.signOutOnNetworkChange) {\n          await SIWEController.signOut();\n          this.onSiweNavigation();\n        } else {\n          esm_exports/* RouterController */.IN.goBack();\n        }\n      } else {\n        esm_exports/* RouterController */.IN.goBack();\n      }\n    }\n    this.caipNetwork = nextCaipNetwork;\n  }\n  onSiweNavigation() {\n    const isEIP155Namespace = esm_exports/* ChainController */.WB.state.activeChain === dist_esm/* ConstantsUtil */.oU.CHAIN.EVM;\n    const authenticated = esm_exports/* AccountController */.Uj.state.siweStatus === 'success';\n    if (!authenticated && isEIP155Namespace) {\n      if (this.open) {\n        esm_exports/* RouterController */.IN.replace('ConnectingSiwe');\n      } else {\n        esm_exports/* ModalController */.W3.open({\n          view: 'ConnectingSiwe'\n        });\n      }\n    } else {\n      esm_exports/* RouterController */.IN.goBack();\n    }\n  }\n};\nW3mModal.styles = styles;\n__decorate([(0,decorators/* state */.wk)()], W3mModal.prototype, \"open\", void 0);\n__decorate([(0,decorators/* state */.wk)()], W3mModal.prototype, \"caipAddress\", void 0);\n__decorate([(0,decorators/* state */.wk)()], W3mModal.prototype, \"caipNetwork\", void 0);\n__decorate([(0,decorators/* state */.wk)()], W3mModal.prototype, \"isSiweEnabled\", void 0);\n__decorate([(0,decorators/* state */.wk)()], W3mModal.prototype, \"shake\", void 0);\nW3mModal = __decorate([(0,esm.customElement)('w3m-modal')], W3mModal);\n\n;// ./node_modules/@reown/appkit-scaffold-ui/dist/esm/exports/w3m-modal.js\n\n\n//# sourceURL=../node_modules/@reown/appkit-scaffold-ui/dist/esm/exports/w3m-modal.js%7C35399aa95ca97ffd2e92a37e3cec6027")}}]);